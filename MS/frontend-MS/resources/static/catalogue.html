<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EKA Motors - Catalogue</title>
  <script>
    // Charger et adapter market.html existant
    (async function() {
      const resp = await fetch('/market.html?t=' + Date.now()); // Cache busting
      if (resp.ok) {
        let html = await resp.text();

        // Effectuer des remplacements cibl√©s sans modifier les identifiants JavaScript
        const replacements = [
          { pattern: /<title>[^<]*<\/title>/, replacement: '<title>EKA Motors - Catalogue<\/title>' },
          { pattern: /March√© de Cartes/g, replacement: 'Catalogue de Voitures' },
          { pattern: /Mes Cartes/g, replacement: 'Mon Compte' },
          { pattern: /mes cartes/g, replacement: 'mon compte' },
          { pattern: /Catalogue de Voitures/g, replacement: 'Catalogue de Voitures' },
          { pattern: /Carte ID:/g, replacement: 'V√©hicule ID:' },
          { pattern: /Carte:/g, replacement: 'V√©hicule:' },
          { pattern: /\bCartes\b/g, replacement: 'Voitures' },
          { pattern: /\bcartes\b/g, replacement: 'v√©hicules' },
          { pattern: /\bCarte\b(?!\s*ID)/g, replacement: 'V√©hicule' },
          { pattern: /\bcarte\b(?!Id)/g, replacement: 'v√©hicule' }
        ];

        replacements.forEach(({ pattern, replacement }) => {
          html = html.replace(pattern, replacement);
        });

        // Ajouter un bouton de rafra√Æchissement et un rafra√Æchissement automatique
        html = html.replace(
          /<h2>Voitures disponibles<\/h2>/,
          '<h2>Voitures disponibles</h2><button onclick="window.location.reload()" style="margin: 10px; padding: 10px; background: #007bff; color: white; border: none; border-radius: 5px;">üîÑ Actualiser le catalogue</button>'
        );
        
        document.open();
        document.write(html);
        document.close();
        
        // Ajouter un rafra√Æchissement automatique toutes les 30 secondes
        setInterval(function() {
          if (window.loadActiveOffers && typeof window.loadActiveOffers === 'function') {
            console.log('Actualisation automatique du catalogue...');
            window.loadActiveOffers();
          }
        }, 30000);
        
      } else {
        document.write('<p>Impossible de charger le catalogue.</p>');
      }
    })();
  </script>
</head>
<body></body>
</html>



